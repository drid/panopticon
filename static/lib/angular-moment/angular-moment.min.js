"format amd";!function(){"use strict";function e(e,t){return e.module("angularMoment",[]).constant("angularMomentConfig",{preprocess:null,timezone:"",format:null,statefulFilters:!0}).constant("moment",t).constant("amTimeAgoConfig",{withoutSuffix:!1,serverTime:null,titleFormat:null,fullDateThreshold:null,fullDateFormat:null}).directive("amTimeAgo",["$window","moment","amMoment","amTimeAgoConfig","angularMomentConfig",function(t,n,o,r,i){return function(a,u,l){function m(){var e;if(g)e=g;else if(r.serverTime){var t=(new Date).getTime(),o=t-F+r.serverTime;e=n(o)}else e=n();return e}function f(){v&&(t.clearTimeout(v),v=null)}function s(e){var n=m().diff(e,"day"),o=$&&n>=$;if(u.text(o?e.format(D):e.from(m(),T)),M&&!u.attr("title")&&u.attr("title",e.local().format(M)),!o){var r=Math.abs(m().diff(e,"minute")),i=3600;1>r?i=1:60>r?i=30:180>r&&(i=300),v=t.setTimeout(function(){s(e)},1e3*i)}}function c(e){w&&u.attr("datetime",e)}function d(){if(f(),p){var e=o.preprocessDate(p,z,h);s(e),c(e.toISOString())}}var p,g,v=null,h=i.format,T=r.withoutSuffix,M=r.titleFormat,$=r.fullDateThreshold,D=r.fullDateFormat,F=(new Date).getTime(),z=i.preprocess,C=l.amTimeAgo,w="TIME"===u[0].nodeName.toUpperCase();a.$watch(C,function(e){return void 0===e||null===e||""===e?(f(),void(p&&(u.text(""),c(""),p=null))):(p=e,void d())}),e.isDefined(l.amFrom)&&a.$watch(l.amFrom,function(e){g=void 0===e||null===e||""===e?null:n(e),d()}),e.isDefined(l.amWithoutSuffix)&&a.$watch(l.amWithoutSuffix,function(e){"boolean"==typeof e?(T=e,d()):T=r.withoutSuffix}),l.$observe("amFormat",function(e){void 0!==e&&(h=e,d())}),l.$observe("amPreprocess",function(e){z=e,d()}),l.$observe("amFullDateThreshold",function(e){$=e,d()}),l.$observe("amFullDateFormat",function(e){D=e,d()}),a.$on("$destroy",function(){f()}),a.$on("amMoment:localeChanged",function(){d()})}}]).service("amMoment",["moment","$rootScope","$log","angularMomentConfig",function(t,n,o,r){this.preprocessors={utc:t.utc,unix:t.unix},this.changeLocale=function(o,r){var i=t.locale(o,r);return e.isDefined(o)&&n.$broadcast("amMoment:localeChanged"),i},this.changeTimezone=function(e){r.timezone=e,n.$broadcast("amMoment:timezoneChanged")},this.preprocessDate=function(n,i,a){return e.isUndefined(i)&&(i=r.preprocess),this.preprocessors[i]?this.preprocessors[i](n,a):(i&&o.warn("angular-moment: Ignoring unsupported value for preprocess: "+i),!isNaN(parseFloat(n))&&isFinite(n)?t(parseInt(n,10)):t(n,a))},this.applyTimezone=function(e,t){return(t=t||r.timezone)?(t.match(/^Z|[+-]\d\d:?\d\d$/i)?e=e.utcOffset(t):e.tz?e=e.tz(t):o.warn("angular-moment: named timezone specified but moment.tz() is undefined. Did you forget to include moment-timezone.js?"),e):e}}]).filter("amCalendar",["moment","amMoment","angularMomentConfig",function(e,t,n){function o(n,o,r){if(void 0===n||null===n)return"";n=t.preprocessDate(n,o);var i=e(n);return i.isValid()?t.applyTimezone(i,r).calendar():""}return o.$stateful=n.statefulFilters,o}]).filter("amDifference",["moment","amMoment","angularMomentConfig",function(e,t,n){function o(n,o,r,i,a,u){if(void 0===n||null===n)return"";n=t.preprocessDate(n,a);var l=e(n);if(!l.isValid())return"";var m;if(void 0===o||null===o)m=e();else if(o=t.preprocessDate(o,u),m=e(o),!m.isValid())return"";return t.applyTimezone(l).diff(t.applyTimezone(m),r,i)}return o.$stateful=n.statefulFilters,o}]).filter("amDateFormat",["moment","amMoment","angularMomentConfig",function(e,t,n){function o(o,r,i,a,u){var l=u||n.format;if(void 0===o||null===o)return"";o=t.preprocessDate(o,i,l);var m=e(o);return m.isValid()?t.applyTimezone(m,a).format(r):""}return o.$stateful=n.statefulFilters,o}]).filter("amDurationFormat",["moment","angularMomentConfig",function(e,t){function n(t,n,o){return void 0===t||null===t?"":e.duration(t,n).humanize(o)}return n.$stateful=t.statefulFilters,n}]).filter("amTimeAgo",["moment","amMoment","angularMomentConfig",function(e,t,n){function o(n,o,r,i){var a,u;return void 0===n||null===n?"":(n=t.preprocessDate(n,o),a=e(n),a.isValid()?(u=e(i),void 0!==i&&u.isValid()?t.applyTimezone(a).from(u,r):t.applyTimezone(a).fromNow(r)):"")}return o.$stateful=n.statefulFilters,o}]).filter("amSubtract",["moment","angularMomentConfig",function(e,t){function n(t,n,o){return void 0===t||null===t?"":e(t).subtract(parseInt(n,10),o)}return n.$stateful=t.statefulFilters,n}]).filter("amAdd",["moment","angularMomentConfig",function(e,t){function n(t,n,o){return void 0===t||null===t?"":e(t).add(parseInt(n,10),o)}return n.$stateful=t.statefulFilters,n}])}"function"==typeof define&&define.amd?define(["angular","moment"],e):"undefined"!=typeof module&&module&&module.exports?(e(angular,require("moment")),module.exports="angularMoment"):e(angular,("undefined"!=typeof global?global:window).moment)}();